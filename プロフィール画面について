ï¼Šï¼ˆä¼‘ã¿ã®æ—¥ãªã®ã§ç„¡ç†ã—ãªã„ã§ãã ã•ã„ã­ï¼ï¼æ±—ï¼‰


æ¤œç´¢çµæœç”»é¢ã‹ã‚‰ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã«ç§»ã‚‹å‡¦ç†

â­ï¸æ¤œç´¢çµæœç”»é¢result.jspã‚’å®Ÿè£…ã™ã‚‹å ´åˆã¯ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã—ãªã„ã®ã§ã‚ã‚Œã°æœˆæ›œæ—¥ã«ç¢ºèªã§ã‚‚å¯

1ï¸âƒ£DAOã®selectByIDãƒ¡ã‚½ãƒƒãƒ‰å¤‰æ›´ï¼ˆç”»åƒå–å¾—ã®ãŸã‚ï¼‰ã€€
2ï¸âƒ£sample.javaã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆ
result.jspï¼ˆæ¤œç´¢çµæœç”»é¢ï¼‰ â–¶ï¸ sample.javaï¼ˆæƒ…å ±å—ã‘æ¸¡ã—ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆï¼‰ â–¶ï¸ profile.jsp ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ï¼‰
ã‚’æƒ³å®šã€ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆåã¯é©å½“ã§ã™
3ï¸âƒ£profile.jsp ã€€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒœã‚¿ãƒ³ã¯ã¾ã ã¤ã‘ã¦ã¾ã›ã‚“ã€‚ã€€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½ãŒå‡ºæ¥ãŸã‚‰ã¾ãŸæ›´æ–°ã—ã¾ã™ã€‚



1ï¸âƒ£DAO è¨‚æ­£éƒ¨åˆ†ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼

//IDã‚’å¼•æ•°ã«ã€ä¸€ä»¶åˆ†æ¤œç´¢
	public userDTO selectById(int userId)
			throws SQLException, ClassNotFoundException, NumberFormatException {

		String sql = "SELECT * FROM user_table INNER JOIN picture ON user_table.user_id = picture.id"
				+ " WHERE user_id = "+ userId + ";" ;
		userDTO userData = null;

		try {
			con = DBManager.getConnection();
 			this.stmt = con.prepareStatement(sql);
			rs = stmt.executeQuery();
			if(rs.next()) {
				userDTO user = new userDTO();
				userId = rs.getInt("user_id");
				String password = rs.getString("user_pass");
				String name = rs.getString("user_nickname");
				String area = rs.getString("user_area");
				String income = rs.getString("user_income");
				String school = rs.getString("user_school");
				String gender = rs.getString("user_gender");
				String age = rs.getString("user_age");
				String height = rs.getString("user_height");
				String body = rs.getString("user_body");
				String job = rs.getString("user_job");
				String holiday = rs.getString("user_holiday");
				String cigar = rs.getString("user_cigar");
				String child = rs.getString("user_child");
				int picId = rs.getInt("user_pic");
				String picName = rs.getString("user_picName");
				String free = rs.getString("user_free");

				return userData = new userDTO(userId,password,name,area,
						income,school,gender,age,height,body,job,
						holiday,cigar,child,picId,picName,free);
			}else {
				return null;
			}
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			stmt.close();
			con.close();
		}
		return userData;
	}
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼package controller;
  

ï¼‘ã€ã€€æ¤œç´¢ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã§æ¤œç´¢å‡¦ç†ã‚’è¡Œã„ã€result.jspç”»é¢ã«é·ç§»
ï¼’ã€  ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€€å¥½ããªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä¸€äººé¸ã¶ï¼ˆuserIdãŒé¸æŠã•ã‚Œã‚‹ï¼‰
ï¼’ã€ã€€result.jspã‹ã‚‰postã§userIdã‚’é€ã‚‹ï¼ˆgetã§ã‚‚ã„ã„ã‘ã©ï¼‰ğŸ‘ˆæœªå®Ÿè£…ã€€ã€€
ï¼“ã€ã€€sample.javaã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã§userIdã‚’å—ã‘å–ã‚‹


2ï¸âƒ£sample.java

import java.io.IOException;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import model.userDAO;
import model.userDTO;


@WebServlet(name="sample", urlPatterns={"/sample"})
public class sample extends HttpServlet {
	private static final long serialVersionUID = 1L;


    public sample() {
        super();

    }


	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {



	}


	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

		request.setCharacterEncoding("UTF-8");

		//IDã‚’jspã‹ã‚‰å—ã‘å–ã‚‹
		 String userId = request.getParameter("userId");
		 String error = null;
		 userDTO user;


		try {
			//userDAOã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
			userDAO userDao = new userDAO();
			//userIdã‚’å¼•æ•°ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã€userã«æ ¼ç´
			user = userDao.selectById(Integer.parseInt(userId));

					//ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã«useræƒ…å ±ã‚’ä¿å­˜
					request.setAttribute("user",user);
					//ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã«é£›ã¶
					request.getRequestDispatcher("profile.jsp").forward(request, response);

					return;


		} catch (ClassNotFoundException | SQLException e) {
			e.printStackTrace();
			return;
		}
	}

}
---------------------------------------------------------------------------------------------------------------------------------
3ï¸âƒ£profile.jsp


<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
<title>profile</title>
<!--Made with love by Mutiullah Samim -->

<!--Bootsrap 4 CDN-->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	crossorigin="anonymous">

<!--Custom styles-->
<link rel="stylesheet" type="text/css" href="myPage.css">
</head>

<body>
	<div class="container">
		<div class="d-flex justify-content-center h-100">
			<div class="card">
				<div class="card-header">
					<h3>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ : ${user.name}</h3>
					<div class="outter">
						<img src="${user.picName}" class="image-circle" />
					</div>
					<div class="d-flex justify-content-end social_icon">
						<span><i class="fab fa-facebook-square"></i></span> <span><i
							class="fab fa-google-plus-square"></i></span> <span><i
							class="fab fa-twitter-square"></i></span>
					</div>
				</div>
				<div class="card-body">
					<h4>â™ªè‡ªå·±ç´¹ä»‹â™ª</h4>
					<form>
						<div class="input-group form-group">
							<div class="input-group-prepend">
								<span class="input-group-text"><i class="my_prof"></i></span>
							</div>
							${user.free}
						</div>

						<h5>â™ªåŸºæœ¬æƒ…å ±â™ª</h5>

						<div class="data" style="white-space:pre-wrap;">



å¹´é½¢ ${user.age}

å±…ä½åœ°   ${user.area}

å¹´å   ${user.income}

èº«é•·   ${user.height}

ä½“å‹   ${user.body}

å­¦æ­´ ${user.school}

è·ç¨®  ${user.job}

ä¼‘æ—¥   ${user.holiday}

ã‚¿ãƒã‚³ã¯å¸ã„ã¾ã™ã‹   ${user.cigar}

å­ä¾›ã¯ã»ã—ã„ã§ã™ã‹  ${user.child}



<A HREF="serch">æˆ»ã‚‹</a>
<A HREF="logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
</div>



</body>

</html>
